<div class="row">
<div class="content content-box col-md-9">
  <div oo-error-overlay></div>
  <div class="panel panel-default">
    <div class="panel-heading clearfix">
      <h3  class="panel-title"><span class="navbar-brand" translate>Produkte</span>
        <form class="navbar-form pull-right" role="search">
          <div class="form-group">
            <input type="text" class="form-control" placeholder="{{'Volltextsuche...'|translate}}" ng-model="search.query.$">
            <a role="button" ng-click="produktErstellen()" class="btn btn-primary" translate><span class="glyphicon glyphicon-plus"></span> Produkt erstellen</a>
          </div>
        </form>
      </span>
      </h3>
    </div>
    <div class="panel-body">
      <div ng-hide="entries">
        <p ng-show="loading"><i class="fa fa-circle-o-notch fa-spin fa-2x"></i></p>
      </div>
      <div ng-show="entries" id="produktTable" display-export="true" export-file-name="Produkte">
        <table ng-table="tableParams" class="table table-striped" show-filter="{{showFilter && hasData()}}" template-pagination="scripts/common/ngtable/oo-ngtable-paginationTemplate.html">
          <tr ng-repeat="produkt in $data track by produkt.id | filter: search.query">
            <td title="'Bezeichnung'|translate" sortable="'name'">
              <span ng-hide="produkt.editable">{{produkt.name}}</span>
              <span ng-show="produkt.editable">
                <input type="text" class="form-control" name="kurzzeichen" ng-model="produkt.name" placeholder="{{'Neue Bezeichnung'|translate}}" required>
              </span>
            </td>
            <td title="'Von'|translate" sortable="'verfuegbarVon'">
              <span ng-hide="produkt.editable">{{getMonthShort(produkt.verfuegbarVon)|translate}}</span>
              <span ng-show="produkt.editable">
                <oo-dropdown dropdown-id="verfuegbarVon" display-style="uib-dropdown" values="monate" selected-prop="id" property="label" selected="produkt.verfuegbarVon" ng-required></oo-dropdown>
              </span>
            </td>
            <td title="'Bis'|translate" sortable="'verfuegbarBis'">
              <span ng-hide="produkt.editable">{{getMonthShort(produkt.verfuegbarBis)|translate}}</span>
              <span ng-show="produkt.editable">
                <oo-dropdown dropdown-id="verfuegbarBis" display-style="uib-dropdown" values="monate" selected-prop="id" property="label" selected="produkt.verfuegbarBis" ng-required></oo-dropdown>
              </span>
            </td>
            <td title="'Preis'|translate" sortable="'preis'">
              <span ng-hide="produkt.editable">{{'CHF'|translate}} {{produkt.preis}}</span>
              <span ng-show="produkt.editable">
                <div class="input-group">
                  <div class="input-group-addon">{{'CHF'|translate}}</div>
                  <input type="number" placeholder="{{'Preis'|translate}}" ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/" step="1" class="form-control" name="preis" ng-model="produkt.preis" required></input>
                </div>
              </span>
            </td>
            <td title="'Einheit'|translate" sortable="'einheit'">
              <span ng-hide="produkt.editable">{{produkt.einheit}}</span>
              <span ng-show="produkt.editable">
                <oo-dropdown dropdown-id="einheit" display-style="uib-dropdown" values="liefereinheiten" selected-prop="id" property="label" selected="produkt.einheit" ng-required></oo-dropdown>
              </span>
            </td>
            <!--TODO add kategorien & Produzenten-->

            <td>
              <div ng-hide="produkt.editable" class="pull-right">
                <a role="button" class="btn btn-sm btn-primary" ng-click="edit(produkt)"><span class="glyphicon glyphicon-edit"></span></a>
                <a role="button" class="btn btn-sm btn-primary" ng-click="delete(produkt)"><span class="glyphicon glyphicon-remove"></span></a>
              </div>
              <div ng-show="produkt.editable" class="pull-right">
                <div class="input-group">
                <oo-save-button model="produkt" form="produktForm" entity="Produkt" on-save="save" on-cancel="backToList" on-created="created" notext="true" small="true"></oo-save-button>
              </div>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>
