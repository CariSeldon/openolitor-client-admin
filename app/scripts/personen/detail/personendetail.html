<div>
  <h1>{{ fullName() || 'Person'|translate}}</h1>
</div>
<form name="personForm">
  <div>
    <section name="basisdaten">
      <h2 translate>Basisdaten</h2>
      <div class="row form-group">
        <div class="col-md-4">
          <label for="typen" translate>Typen</label>
        </div>
        <div class="col-md-8">
          <oo-personentypen personentypen-list="person.typen"></oo-personentypen>
        </div>
      </div>
      <div class="row form-group">
        <div class="col-md-4">
          <label for="vorname" translate>Vorname</label>
        </div>
        <div class="col-md-8">
          <input type="text" class="form-control" name="vorname" ng-model="person.vorname" placeholder="{{'Vorname'|translate}}" required>
        </div>
      </div>
      <div class="row form-group">
        <div class="col-md-4">
          <label for="name" translate>Name</label>
        </div>
        <div class="col-md-8">
          <input type="text" class="form-control" name="name" ng-model="person.name" placeholder="{{'Name'|translate}}" required>
        </div>
      </div>
      <div class="row form-group">
        <div class="col-md-4">
          <label for="strasse" translate>Strasse / Nr.</label>
        </div>
        <div class="col-md-4">
          <input type="text" class="form-control" id="strasse" ng-model="person.strasse" ng-required="!person.postfach" placeholder="{{'Strasse'|translate}}" maxlength="30">
        </div>
        <div class="col-md-1">
          <input type="text" class="form-control" id="hausNummer" ng-model="person.hausNummer" placeholder="{{'Nr'|translate}}" maxlength="10">
        </div>
      </div>
      <div class="row form-group">
        <div class="col-md-4">
          <label for="adressZusatz" translate>Adresszusatz</label>
        </div>
        <div class="col-md-8">
          <input type="text" class="form-control" name="adressZusatz" ng-model="person.adressZusatz" placeholder="{{'Adresszusatz'|translate}}">
        </div>
      </div>
      <div class="row form-group">
        <div class="col-md-4">
          <label for="plz" translate>PLZ / Ort</label>
        </div>
        <div class="col-md-1">
          <input type="text" pattern="[0-9]{4}" class="form-control" id="plz" ng-model="person.plz" required placeholder="{{'PLZ'|translate}}" maxlength="4">
        </div>
        <div class="col-md-4">
          <input type="text" class="form-control" id="ort" ng-model="person.ort" required placeholder="{{'Ort'|translate}}" maxlength="35">
        </div>
      </div>
      <div class="row form-group">
        <div class="col-md-4">
          <label for="email" translate>Email</label>
        </div>
        <div class="col-md-8">
          <input type="email" class="form-control" name="email" ng-model="person.email" placeholder="{{'Email'|translate}}" required>
        </div>
      </div>
      <div class="row form-group">
        <div class="col-md-4">
          <label for="emailAlternative" translate>Alternative Emailadresse</label>
        </div>
        <div class="col-md-8">
          <input type="emailAlternative" class="form-control" name="emailAlternative" ng-model="person.emailAlternative" placeholder="{{'Alternative Emailadresse'|translate}}">
        </div>
      </div>
      <div class="row form-group">
        <div class="col-md-4">
          <label for="telefon" translate>Telefon</label>
        </div>
        <div class="col-md-4">
          <input type="text" class="form-control" name="telefon" ng-model="person.telefon" placeholder="{{'Telefon'|translate}}">
        </div>
      </div>
      <div class="row form-group">
        <div class="col-md-4">
          <label for="telefonAlternative" translate>Alternative Telefonnummer</label>
        </div>
        <div class="col-md-4">
          <input type="text" class="form-control" name="telefonAlternative" ng-model="person.telefonAlternative" placeholder="{{'Alternative Telefonnummer'|translate}}">
        </div>
      </div>
      <div class="row form-group">
        <div class="col-md-4">
          <label for="bemerkungen" translate>Bemerkungen</label>
        </div>
        <div class="col-md-8">
          <textarea class="form-control" name="bemerkungen" ng-model="person.bemerkungen" placeholder="{{'Bemerkungen'|translate}}..."></textarea>
        </div>
      </div>
    </section>

    <section name="abos" ng-if="isExisting()">
      <h2 translate>Abos</h2>
      <a role="button" href="#/personen/{{person.id}}/abos/new" class="btn btn-primary" translate>Neues Abo</a>
      <table class="table table-striped table-condensed">
        <tr ng-repeat="abo in person.abos">
          <td>
            <a ng-href="#personen/{{person.id}}/abos/{{abo.id}}" translate>Details</a>
          </td>
          <td>
            <a ng-href="#/abotypen/{{abo.abotypId}}" translate>{{abo.abotypName}}</a>
          </td>
          <td>
            <a ng-href="#/depots/{{abo.depotId}}" translate>{{abo.depotName}}</a>
          </td>
        </tr>
      </table>
    </section>

    <div class="row form-group">
      <div class="col-md-4">
        <oo-save-button model="person" form="personForm" entity="Person" on-save="save" on-cancel="cancel">{{fullName() || 'Person'|translate}}</oo-save-button>
      </div>
      <div class="col-md-8" ng-if="isExisting()">
        <oo-delete-button model="person" entity="Person" on-delete="delete" redirect-on-delete="/personen"></oo-delete-button>
      </div>
    </div>
  </div>
</form>
