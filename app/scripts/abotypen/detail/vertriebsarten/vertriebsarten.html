<div class="panel panel-default oo-vertriebsarten">
  <div class="panel-heading clearfix">
    <h3 class="panel-title dropdown"><span translate>Vertriebsarten</span>
        <span class="pull-right" ng-show="loading || template.updating"><i class="fa fa-circle-o-notch fa-spin fa-2x"></i></span>
        <div uib-dropdown class="btn-group pull-right" role="group">
          <a uib-dropdown-toggle role="button" ng-href="" class="btn btn-default"><span class="glyphicon glyphicon-plus"></span> </a>
          <ul uib-dropdown-menu role="menu" class="dropdown-form">
            <li role="menuitem" ng-repeat="typ in vertriebsartenTypen"><a href="" ng-click="addVertrieb(typ)">{{typ.label}}</a></li>
          </ul>
        </div>
    </h3>
  </div>
  <div class="panel-body">
    <table class="table">
      <tbody>
        <tr ng-repeat="vertrieb in vertriebe" ng-class="vertriebsartClass(vertriebsart)" ng-click="selectVertriebsart(vertriebsart)" >
          <td><label>{{vertrieb.typ}}</label></td>
          <td>
            <div class="form-group" ng-if="isDepot(vertrieb)">
              <label for="depot" translate>Depot</label>
            </div>
            <div class="form-group" ng-if="isDepot(vertrieb)">
              <span ng-repeat="vertriebsart in vertrieb.vertriebsarten" class="badge" ng-if="vertriebsart !== ''">
                {{vertriebsart.depot.name}}
                <span ng-hide="vertrieb.vertriebsarten.length < 2"ng-click="deleteVertriebsart(vertrieb, vertriebsart)" class="glyphicon glyphicon-remove"></span>
              </span>
              <span class="dropdown pull-right">
                <oo-dropdown dropdown-id="depot" display-style="uib-dropdown" values="depots" property="name" selected-prop="id" selected-function="addVertriebsartFunc()" selected-function-scope="vertrieb"></oo-dropdown>
              </span>
            </div>
            <div class="form-group" ng-if="isHeimlieferung(vertrieb)">
              <label for="depot" translate>Tour</label>
            </div>
            <div class="form-group" ng-if="isHeimlieferung(vertrieb)">
              <span ng-repeat="vertriebsart in vertrieb.vertriebsarten" class="badge" ng-if="vertriebsart !== ''">
                {{vertriebsart.tour.name}}
                <span ng-click="deleteVertriebsart(vertrieb, vertriebsart)" class="glyphicon glyphicon-remove"></span>
              </span>
              <span class="dropdown pull-right">
                <oo-dropdown dropdown-id="depot" display-style="uib-dropdown" values="touren" property="name" selected-prop="id" selected-function="addVertriebsartFunc()" selected-function-scope="vertrieb"></oo-dropdown>
              </span>
            </div>
          </td>
          <td>
            <div class="form-group" ng-if="isPreselectionComplete(vertrieb)">
              <label for="lieferzeitpunkte" translate>Liefertag</label>
            </div>
            <div class="form-group" ng-if="isPreselectionComplete(vertrieb)">
              <oo-liefertage liefertag="vertrieb.liefertag" required></oo-liefertage>
            </div>
          </td>
          <td>
            <div class="pull-right">
              <div class="btn-group" ng-hide="updatingVertrieb(vertrieb)">
                <button role="button" ng-href="" ng-hide="invalidVertrieb(vertrieb)" ng-click="updateVertrieb(vertrieb)" class="btn btn-sm btn-primary"><i class="fa fa-floppy-o"></i></button>
              </div>
              <div class="btn-group" ng-hide="updatingVertrieb(vertrieb)">
                <button role="button" ng-href="" ng-hide="vertriebe.length < 2" ng-click="deleteVertrieb(vertrieb)" class="btn btn-sm btn-danger"><span class="glyphicon glyphicon-remove"></span></button>
              </div>
              <div class="btn-group" ng-hide="updatingVertrieb(vertrieb)">
                <button role="button" ng-href="" ng-show="vertriebsart.id" ng-click="selectVertrieb(vertrieb)" class="btn btn-sm btn-default" oo-stop-event><i class="fa fa-long-arrow-right"></i></button>
              </div>
              <i ng-show="updatingVertrieb(vertrieb)" ng-cloak class="fa fa-circle-o-notch fa-spin"></i>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
